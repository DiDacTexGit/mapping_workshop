<!DOCTYPE html>
<html>
    <head>
        <title>Web Mapping Workshop - Lotlinker Data</title>

        <link rel="stylesheet" href="../lib/leaflet-0.7/leaflet.css" />
        <link rel="stylesheet" href="../lib/leaflet.markercluster/MarkerCluster.css" />
        <link rel="stylesheet" href="../lib/leaflet.markercluster/MarkerCluster.Default.css" />
        <link rel="stylesheet" href="../styles/reset.css" />
        <link rel="stylesheet" href="../styles/workshop.css" />
    </head>
    <body>
        <!-- Navigation Start -->
        <nav class="navigation">
            <ul>
                <li><a href="00_introductions.html">Introductions</a></li>
                <li><a href="01_intro2mapping.html">Introduction to Web Mapping</a></li>
                <li><a href="02_intro2leaflet.html">Introduction to Leaflet</a></li>
                <li><a href="03_devenv.html">Development Environment</a></li>
                <li><a href="10_hellomap.html">Making a Map</a></li>
                <li><a href="11_tilesources.html">Base Maps</a></li>
                <li><a href="20_markers.html">Markers</a></li>
                <li><a href="21_popups.html">Pop Ups</a><li>
                <li><a href="30_linestrings.html">Line Data</a></li>
                <li><a href="31_polygons.html">Polygons</a></li>
                <li><a href="40_plugins_markercluster.html">Plugins - Marker Clustering</a></li>
                <li><a href="41_heatmap.html">Plugins - Heatmap</a></li>
                <li><a href="cfd.html">Civic Hacking &amp; Code for Dayton</a></li>
                <li><a href="lotlinker.html">Data - Dayton</a></li>
                <li><a href="national.html">Data - National</a></li>
                <li><a href="global.html">Data - Global</a></li>
                <li>The Starter Project</li>
                <li>Workshop</li>
                <li>Resources</li>
            </ul>
        </nav>
        <!-- Navigation End -->

        <section class="content">
            <h1>Property Data from Lotlinker</h1>
            <div id="mapid" style="width: 100%; height: 400px"></div>
            <h2>Description</h2>
            <h2>Data Source</h2>
            <h2>Enhancements</h2>
            <h2>Resources</h2>
        </section>

        <script src="../lib/leaflet-0.7/leaflet.js"></script>
        <script src="../lib/leaflet.markercluster/leaflet.markercluster-src.js"></script>
        <script src="data/lotlinker.json"></script>
        <script>

            var mymap = L.map('mapid').setView([39.758948, -84.191607], 11);

            L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw', {
                maxZoom: 18,
                attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
                    '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
                    'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
                id: 'mapbox.streets'
            }).addTo(mymap);

            function formatPopup(props) {
                return '<h3>' + props.street + '</h3>' +
                       '<p>Parcel ID: <a href="http://www.mctreas.org/master.cfm?parid=' +
                           props.parcelid.replace(" ", "%20") +
                           '&taxyr=2015&own1=SMITH">' + props.parcelid + '</a></p>' + 
                           '<p>Claimed: ' + (props.claimed ? "Yes" : "No") + '</p>' + 
                           '<a href="' + props.url + '">Details</a>';
            }

            var markerList = [];
            for (var i = 0; i < points.length; i++) {
                var a = points[i];
                var title = a.street;
                var marker = L.marker(L.latLng(parseFloat(a.lat), parseFloat(a.lon)), { title: title});

                marker.bindPopup(formatPopup(a));
                markerList.push(marker);
            }

            markers = L.markerClusterGroup();
            markers.addLayers(markerList);
            mymap.addLayer(markers);

        </script>
    </body>
</html>

