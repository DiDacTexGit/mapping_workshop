
<!DOCTYPE html>
<html>
<head>
  <title>Airport Example</title>
  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="../lib/leaflet-0.7/leaflet.css" />
  <link rel="stylesheet" href="../lib/leaflet.markercluster/MarkerCluster.css" />
  <link rel="stylesheet" href="../lib/leaflet.markercluster/MarkerCluster.Default.css" />
</head>
<body>
  <div id="mapid" style="width: 600px; height: 400px"></div>

  <script src="../lib/leaflet-0.7/leaflet.js"></script>
  <script src="../lib/leaflet.markercluster/leaflet.markercluster-src.js"></script>
  <script src="data/dayton_routes.json"></script>
  <script>
    console.log('routes', routes);
    var mymap = L.map('mapid').setView([39.758948, -84.191607], 4);

    L.tileLayer("http://a.tile.stamen.com/watercolor/{z}/{x}/{y}.jpeg", {
      maxZoom: 18,
      attribution: [
        'Map tiles by <a href="http://stamen.com/">Stamen Design</a>, ',
        'under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. ',
        'Data by <a href="http://openstreetmap.org/">OpenStreetMap</a>, ',
        'under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.'
      ].join(""),
      id: 'stamen.watercolor'
    }).addTo(mymap);

    function prettyPopup(props) {
      //console.log(props);
      return '<h3>' + props.name + ' (' + props.code + ')</h3>';
    }

    var homeLatLng = L.latLng(parseFloat(routes.lat), parseFloat(routes.lon));
    var marker = L.marker(homeLatLng, {
      title: routes.name + ' (' + routes.code + ')'
    }).addTo(mymap);
    marker.bindPopup(prettyPopup(routes));
    marker.addTo(mymap);
    for (var i = 0; i < routes.outbound.length; i++) {
      var a = routes.outbound[i];
      var title = a.name;
      var awayLatLng = L.latLng(parseFloat(a.lat), parseFloat(a.lon))
      var line = L.polyline([homeLatLng, awayLatLng], {
        color: '#696'
      });
      line.bindPopup(prettyPopup(a));
      line.addTo(mymap);
      marker = L.marker(awayLatLng, {title: a.name + ' (' + a.code + ')'});
      marker.bindPopup(prettyPopup(a));
      marker.addTo(mymap);
    }

  </script>
</body>
</html>

